<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
  
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
     <link rel="stylesheet" href="Stilo.css"> 
     <style>
        .margen{
            margin-top: 80px;
        }
        
    </style>
    <title>Prueba</title>
</head>
<body>
       
    <nav class="navbar navbar-expand-lg navbar-light bg-dark fixed-top">
        <a class="navbar-brand">Brand</a>
        <button class="navbar-toggler" data-target="#my-nav" data-toggle="collapse" aria-controls="my-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="my-nav" class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Item 1 <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Item 2</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container-fluid margen">
        <div class="row">
            <div class="col-3">
                <div id="calendario">
                </div>
                <button id="fecha">Ver fecha</button>
            </div>
            <div class="col-6">
                <h1 class="text-center">Tareas Diarias</h1>
                <div id="EstadoPendiente">
                    <!-- <div class="alert alert-primary" role="alert">
                    </div> -->
                </div>
                
                <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
        Redactar Reporte
      </button>
      
      <!-- Modal -->
      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Reporte</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <label for="">Título</label>
              <input class="form-control" type="text" name="titulo" id="titulo" required>
              <hr>
              <label for="">Descripción</label>
              <input class="form-control" type="text" name="descripcion" id="descripcion" required>
              <hr>              
              <div class="form-group">
                <label for="">Observación</label>
                <textarea class="form-control" name="" id="observacion" rows="3" cols="3"></textarea>
              </div>
              <hr>
              <label for="">Users_id</label>
              <input class="form-control" type="text" name="users_id" id="users_id" required>
              <hr>   
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
              <button type="button" name="submit" id="submit" class="btn btn-primary">Guardar</button>
            </div>
          </div>
        </div>
      </div>
            </div>
            
            <div class="col-3">
                <div class="col-12">
                    <!-- <h4 class="text-center">Tareas Pendientes</h4>
                    <br> -->
                    <!-- <div class="alert alert-danger" role="alert">
                        This is a light alert—check it out!
                    </div>
                    <div class="alert alert-dark" role="alert">
                        This is a dark alert—check it out!
                    </div>
                    <div class="alert alert-dark" role="alert">
                        This is a dark alert—check it out!
                    </div> -->
                    <!-- <div id="EstadoPendiente">
                           
                    </div>
                    <hr> -->
                </div>
                <div class="col-12">
                    <h4 class="text-center">Tareas Finalizadas</h4>
                    <!-- <br>
                    <div class="alert alert-danger" role="alert">
                        This is a light alert—check it out!
                    </div>
                    <div class="alert alert-dark" role="alert">
                        This is a dark alert—check it out!
                    </div>
                    <div class="alert alert-dark" role="alert">
                        This is a dark alert—check it out!
                    </div> -->
                    <div id="EstadoFinalizada">
                           
                    </div>
                </div>
                <hr>
                <div class="col-12">
                    <h4 class="text-center">Tareas No Terminadas</h4>
                        
                    <div id="EstadoNoTerminadas">
                               
                    </div>
                </div>
                <hr>
            </div>
        </div>
    </div>

<Input id="mensaje" type="text">

<script>
    Date.prototype.toString = function() { 
        return this.getFullYear()+"/"+(this.getMonth()+1)+"/"+this.getDate(); 
    } 
    var miFecha = new Date(); 
    var datoFecha = miFecha ;
    console.log(datoFecha);

    $(document).ready(datos);

    function datos() {
        $(function() { $("#calendario").datepicker({ dateFormat: "yy-mm-dd"}); 
        
        $("#calendario").on("change",
            function(){ 
                datoFecha = $(this).val(); 
                $("#mensaje").val(datoFecha); 
                //Tareas Pendientes
                $.ajax({
                    method:"post",
                    url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/diario",
                    data:{
                        users_id: 1,
                        fechaFin: datoFecha
                    },
                    success:pendiente,
                    error:error
                });

                //Tareas Finalizadas
                // $.ajax({
                //     method:"post",
                //     url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/finalizado",
                //     data:{
                //         users_id: 1,
                //         fechaFin: datoFecha
                //     },
                //     success:finalizadas,
                //     error:errorFinalizadas
                // });


                //Tareas No Terminadas
                // $.ajax({
                //     method:"post",
                //     url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/nada",
                //     data:{
                //         users_id: 1,
                //         fechaFin: datoFecha
                //     },
                //     success:NoTerminadas,
                //     error:errorNoTerminadas
                // });


            }); 
        });
        
        //Tareas pendientes
        $.ajax({
            method:"post",
            url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/diario",
            data:{
                users_id: 1,
                fechaFin: datoFecha
            },
            success:pendiente,
            error:error
        });

        //Tareas Finalizadas
        // $.ajax({
        // method:"post",
        // url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/finalizado",
        // data:{
        // users_id: 1,
        // fechaFin: datoFecha
        // },
        // success:finalizadas,
        // error:errorFinalizadas
        // });


        //Tareas No Terminadas
        // $.ajax({
        // method:"post",
        // url:"http://192.168.32.132/Gestion_Tareas/public/api/tareas/nada",
        // data:{
        // users_id: 1,
        // fechaFin: datoFecha
        // },
        // success:NoTerminadas,
        // error:errorNoTerminadas
        // });


        
                    
        // $("#fecha").click(function(){
        //     console.log(datoFecha);
        // });

//         $("#bot").click(function(){
//     $("#bot").toggleClass("btn-success");
//   });
    }

    function pendiente(r) {
        let listar = r.tarea;
        // $("#contenedor").html("");

        $("#EstadoPendiente").html("");
        // $("#EstadoFinalizada").html("");
        // $("#EstadoNoTerminadas").html("");
        listar.forEach(element => {
            
            //Tareas pendientes, finalizadas o no cumplidas se mostraran en la barra lateral derecha
            //en base al estado de la tarea
            switch (element.estado) {
                case 'Pendiente':
                    $("#EstadoPendiente").append('<div class="bg-primary d-flex bd-highlight" role="alert">'
                                            +'<button onclick="color()">Cambiar</button>'
                                            +'<div id="tex" class="p-2 w-100 bd-highlight text-center">'
                                            +"Titulo: "+element.tituloTarea+"<br>"
                                            +"Descripción: "+element.descripcion+"<br>"
                                            +" Estado: "+element.estado+'</div></div><br>');
                break;

                // case 'Finalizada':
                //     $("#EstadoFinalizada").append('<div class="alert alert-warning text-center" role="alert">'
                //                             +"Titulo: "+element.tituloTarea+"<br>"
                //                             +"Descripción: "+element.descripcion+"<br>"
                //                             +" Estado: "+element.estado+'</div>');
                // break;

                // case 'No cumplida':
                //     $("#EstadoNoTerminadas").append('<div class="alert alert-danger text-center" role="alert">'
                //                             +"Titulo: "+element.tituloTarea+"<br>"
                //                             +"Descripción: "+element.descripcion+"<br>"
                //                             +" Estado: "+element.estado+'</div>');
                // break;
        
                default:
                break;
            }

            
            
            
        });

    

  function color(id) {
    id.style.backgroundColor = "#1ec5e5";
  id.innerHTML = "Release Me";
};
    }

    function error(r) {
        alert("Error: "+r);
    }





//---------------------------------------------Finalizadas---------------------------------------------

                   


    function finalizadas(r) {
        let listar = r.tarea;
        $("#contenedor").html("");

        $("#EstadoPendiente").html("");
        $("#EstadoFinalizada").html("");
        $("#EstadoNoTerminadas").html("");
        listar.forEach(element => {

            //Tareas pendientes, finalizadas o no cumplidas se mostraran en la barra lateral derecha
            //en base al estado de la tarea
            switch (element.estado) {
                

                case 'Finalizada':
                    $("#EstadoFinalizada").append('<div class="bg-primary d-flex bd-highlight" role="alert">'
                                            +'<button class="p-2 flex-shrink-1 bd-highlight btn btn-warning">Cambiar</button>'
                                            +'<div class="p-2 w-100 bd-highlight">'
                                            +"Titulo: "+element.tituloTarea+"<br>"
                                            +"Descripción: "+element.descripcion+"<br>"
                                            +" Estado: "+element.estado+'</div></div><br>');
                break;
        
                default:
                break;
            }
        });
    }

    function errorFinalizadas(r) {
        alert("Error: "+r);
    }


//------------------------------------------------No terminadas---------------------------------------


                    

    function NoTerminadas(r) {
        let listar = r.tarea;
        $("#contenedor").html("");

        $("#EstadoPendiente").html("");
        $("#EstadoFinalizada").html("");
        $("#EstadoNoTerminadas").html("");
        listar.forEach(element => {
        
            // Tareas pendientes, finalizadas o no cumplidas se mostraran en la barra lateral derecha
            // en base al estado de la tarea
            switch (element.estado) {

                case 'No cumplida':
                    $("#EstadoNoTerminadas").append('<div class="bg-primary d-flex bd-highlight" role="alert">'
                                            +'<button class="p-2 flex-shrink-1 bd-highlight btn btn-warning">Cambiar</button>'
                                            +'<div class="p-2 w-100 bd-highlight">'
                                            +"Titulo: "+element.tituloTarea+"<br>"
                                            +"Descripción: "+element.descripcion+"<br>"
                                            +" Estado: "+element.estado+'</div></div><br>');
                break;
        
                default:
                break;
            }
        });
    }

    function errorNoTerminadas(r) {
        alert("Error: "+r);
    }
    


    //Agregar reporte
    // $('#submit').click(function(){
    //     agregarR();
    // });
    //Peticion agregar reporte
    // function agregarR(){
    //     $.ajax({
    //         method:"post",
    //         url:"http://192.168.32.132/Gestion_Tareas/public/api/reportes/insertar",
    //         data:{
    //             titulo: $('#titulo').val(),                
    //             descripcion: $('#descripcion').val(),
    //             observacion: $('#observacion').val(),                
    //             users_id: $('#users_id').val()
    //         },
    //         success:mensaje,
    //         error:error
    //     })
    // }
</script>



</body>
</html>